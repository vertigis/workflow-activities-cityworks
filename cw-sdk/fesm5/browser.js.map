{"version":3,"file":"browser.js","sources":["../esm5/api-service/AuthenticationService.js","../esm5/core/service-types.js","../esm5/browser/http-service.js","../esm5/browser/cookie-service.js","../esm5/browser/api-service.js"],"sourcesContent":["var AuthenticationService = /** @class */ (function () {\r\n    function AuthenticationService(service) {\r\n        this._service = service;\r\n    }\r\n    AuthenticationService.prototype.Authenticate = function (request) {\r\n        return this._service.call(request, 'General/Authentication/Authenticate');\r\n    };\r\n    AuthenticationService.prototype.CityworksOnlineAuthenticate = function (request) {\r\n        return this._service.call(request, 'General/Authentication/CityworksOnlineAuthenticate');\r\n    };\r\n    AuthenticationService.prototype.CityworksOnlineSites = function (request) {\r\n        return this._service.call(request, 'General/Authentication/CityworksOnlineSites');\r\n    };\r\n    AuthenticationService.prototype.Domains = function (request) {\r\n        return this._service.call(request, 'General/Authentication/Domains');\r\n    };\r\n    AuthenticationService.prototype.User = function (request) {\r\n        return this._service.call(request, 'General/Authentication/User');\r\n    };\r\n    AuthenticationService.prototype.Validate = function (request) {\r\n        return this._service.call(request, 'General/Authentication/Validate');\r\n    };\r\n    AuthenticationService.prototype.Version = function (request) {\r\n        return this._service.call(request, 'General/Authentication/Version');\r\n    };\r\n    return AuthenticationService;\r\n}());\r\nexport { AuthenticationService };\r\n","export var ServiceTypes;\r\n(function (ServiceTypes) {\r\n    var CoreResponseMessageType;\r\n    (function (CoreResponseMessageType) {\r\n        CoreResponseMessageType[CoreResponseMessageType[\"Success\"] = 0] = \"Success\";\r\n        CoreResponseMessageType[CoreResponseMessageType[\"Warning\"] = 1] = \"Warning\";\r\n        CoreResponseMessageType[CoreResponseMessageType[\"Error\"] = 2] = \"Error\";\r\n    })(CoreResponseMessageType = ServiceTypes.CoreResponseMessageType || (ServiceTypes.CoreResponseMessageType = {}));\r\n    var CoreResponseStatus;\r\n    (function (CoreResponseStatus) {\r\n        CoreResponseStatus[CoreResponseStatus[\"Ok\"] = 0] = \"Ok\";\r\n        CoreResponseStatus[CoreResponseStatus[\"Error\"] = 1] = \"Error\";\r\n        CoreResponseStatus[CoreResponseStatus[\"Unauthorized\"] = 2] = \"Unauthorized\";\r\n        CoreResponseStatus[CoreResponseStatus[\"InvalidCredentials\"] = 3] = \"InvalidCredentials\";\r\n        CoreResponseStatus[CoreResponseStatus[\"ConnectionError\"] = -1] = \"ConnectionError\";\r\n    })(CoreResponseStatus = ServiceTypes.CoreResponseStatus || (ServiceTypes.CoreResponseStatus = {}));\r\n})(ServiceTypes || (ServiceTypes = {}));\r\n","function jsonParse(jsonText) {\r\n    //Date format is YYYY-MM-DDThh:mm:ss\r\n    //This is assumed to be local time and is only here for legacy reasons.\r\n    var DATE_REGEX_LOCAL = /(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2})$/;\r\n    return JSON.parse(jsonText, function (key, value) {\r\n        var retVal = value;\r\n        var isString = (value) && (typeof value == 'string');\r\n        var isStandardDate = isString && DATE_REGEX_LOCAL.test(value);\r\n        //------------------------------------------------------------\r\n        //  Try to parse dates\r\n        //------------------------------------------------------------\r\n        if (isStandardDate) {\r\n            var result = DATE_REGEX_LOCAL.exec(value);\r\n            if (result) {\r\n                // Get all of the date's components.\r\n                var year = parseInt(result[1]);\r\n                var month = parseInt(result[2]) - 1; // Month is zero based.\r\n                var day = parseInt(result[3]);\r\n                var hour = parseInt(result[4]);\r\n                var min = parseInt(result[5]);\r\n                var sec = parseInt(result[6]);\r\n                //Check for null date\r\n                if (year === 1 && month === 0 && day === 1) {\r\n                    retVal = null;\r\n                }\r\n                else {\r\n                    //Create the date. This is local time and is not correct unless the server\r\n                    //time is the same as local time.\r\n                    var localDate = new Date(year, month, day, hour, min, sec);\r\n                    //MUST set full year to handle cases such as \"0001-01-01\"\r\n                    localDate.setFullYear(year);\r\n                    retVal = localDate;\r\n                }\r\n            }\r\n        }\r\n        return retVal;\r\n    });\r\n}\r\nexport function post(url, token, csrfToken, csrfTokenHeader, dataParams) {\r\n    var xhr = new XMLHttpRequest();\r\n    var promise = new Promise(function (resolve, reject) {\r\n        var apiUrl = url;\r\n        var uri = '';\r\n        if (!dataParams)\r\n            dataParams = { data: {}, token: (token !== null ? token : '') };\r\n        else {\r\n            dataParams = { data: JSON.stringify(dataParams), token: (token !== null ? token : '') };\r\n        }\r\n        for (var key in dataParams) {\r\n            uri += encodeURIComponent(key) + '=' + encodeURIComponent(dataParams[key]) + '&';\r\n        }\r\n        xhr.open('POST', apiUrl, true);\r\n        xhr.setRequestHeader(\"Content-type\", \"application/x-www-form-urlencoded\");\r\n        if (csrfTokenHeader && csrfTokenHeader.length > 0 && csrfToken && csrfToken.length > 0) {\r\n            xhr.setRequestHeader(csrfTokenHeader, csrfToken);\r\n        }\r\n        xhr.onreadystatechange = function () {\r\n            if (xhr.readyState === 4) {\r\n                if (xhr.status === 200) {\r\n                    resolve(jsonParse(xhr.response));\r\n                }\r\n                else {\r\n                    reject(Error(xhr.statusText));\r\n                }\r\n            }\r\n        };\r\n        xhr.onerror = function () {\r\n            reject(Error('Network Error'));\r\n        };\r\n        xhr.send(uri);\r\n    });\r\n    return promise;\r\n}\r\n","var CookieService = /** @class */ (function () {\r\n    function CookieService() {\r\n    }\r\n    /**\r\n     *\r\n     */\r\n    CookieService.getCookieStringValue = function (cookieName) {\r\n        cookieName = (cookieName || '').toLowerCase();\r\n        if (cookieName.length < 1) {\r\n            return undefined;\r\n        }\r\n        var cookies = (document.cookie || '').split(';').map(function (a) { return a.trim(); });\r\n        var cookieIndex = -1;\r\n        for (var i = 0; i < cookies.length; i++) {\r\n            var cookie = cookies[i];\r\n            var name_1 = cookie.toLowerCase().slice(0, (cookieName + \"=\").length);\r\n            var match = name_1 === cookieName + \"=\";\r\n            if (match) {\r\n                cookieIndex = i;\r\n                break;\r\n            }\r\n        }\r\n        if (cookieIndex < 0) {\r\n            return undefined;\r\n        }\r\n        var rawCookie = cookies[cookieIndex];\r\n        var rawValue = rawCookie.slice((cookieName + \"=\").length) || '';\r\n        if (rawValue.length > 0) {\r\n            return decodeURIComponent(rawValue);\r\n        }\r\n        else {\r\n            return undefined;\r\n        }\r\n    };\r\n    return CookieService;\r\n}());\r\nexport { CookieService };\r\n","import { AuthenticationService } from '../api-service/AuthenticationService';\r\nimport { ServiceTypes } from '../core/service-types';\r\nimport * as http from './http-service';\r\nimport { CookieService } from './cookie-service';\r\nvar ApiService = /** @class */ (function () {\r\n    function ApiService(baseUrl, token) {\r\n        if (token === void 0) { token = undefined; }\r\n        this._csrfTokenCookieName = 'cw-reqtkn';\r\n        this._csrfHeaderName = 'cw-csrf';\r\n        this._baseUrl = undefined;\r\n        this._csrfToken = undefined;\r\n        this._token = undefined;\r\n        if (typeof token === 'undefined' || !token || token.length < 1) {\r\n            this._token = undefined;\r\n        }\r\n        else {\r\n            this._token = token;\r\n        }\r\n        if (typeof baseUrl === 'undefined' || !baseUrl || baseUrl.length < 1) {\r\n            this._baseUrl = undefined;\r\n        }\r\n        else {\r\n            this._baseUrl = cleanUrl(baseUrl);\r\n        }\r\n    }\r\n    ApiService.prototype.getToken = function () {\r\n        return this._token;\r\n    };\r\n    ApiService.prototype.initializeCsrfToken = function () {\r\n        this._csrfToken = CookieService.getCookieStringValue(this._csrfTokenCookieName);\r\n    };\r\n    ApiService.prototype.login = function (userName, password) {\r\n        var _this = this;\r\n        if (this._baseUrl === null) {\r\n            return Promise.reject(\"No Cityworks URL is set. URL must be set in the constructor.\");\r\n        }\r\n        var request = {\r\n            LoginName: userName,\r\n            Password: password\r\n        };\r\n        var svc = new AuthenticationService(this);\r\n        var promise = svc.Authenticate(request);\r\n        promise.then(function (resp) {\r\n            if (resp && resp.Status === ServiceTypes.CoreResponseStatus.Ok && resp.Value) {\r\n                _this._token = resp.Value.Token;\r\n            }\r\n            else {\r\n                _this._token = undefined;\r\n            }\r\n            return resp;\r\n        }, function (response) {\r\n            console.error(\"error logging in\");\r\n            console.error(response);\r\n            _this._token = undefined;\r\n            return response;\r\n        });\r\n        return promise;\r\n    };\r\n    ApiService.prototype.call = function (data, url) {\r\n        if (this._baseUrl === null) {\r\n            return Promise.reject(\"No Cityworks URL is set. URL must be set in the constructor.\");\r\n        }\r\n        return http.post(this._baseUrl + 'Services/' + url, this._token, this._csrfToken || undefined, this._csrfHeaderName, data);\r\n    };\r\n    return ApiService;\r\n}());\r\nexport { ApiService };\r\nfunction cleanUrl(u) {\r\n    var viewUrl = u[u.length - 1] === '/' || u[u.length - 1] == '\\\\' ? '' : (u.indexOf('/') > -1 ? '/' : '\\\\');\r\n    return u + viewUrl;\r\n}\r\n;\r\n"],"names":["http.post"],"mappings":"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"}